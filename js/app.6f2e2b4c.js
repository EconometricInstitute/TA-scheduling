(function(e){function t(t){for(var o,a,c=t[0],i=t[1],l=t[2],f=0,p=[];f<c.length;f++)a=c[f],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&p.push(s[a][0]),s[a]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,c=1;c<n.length;c++){var i=n[c];0!==s[i]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},s={app:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/TA-scheduling/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;r.push([5,"chunk-vendors"]),n()})({0:function(e,t){},"007d":function(e,t,n){},"0963":function(e,t,n){},"0eaa":function(e,t,n){},1:function(e,t){},10:function(e,t){},1036:function(e,t,n){"use strict";n("ea77")},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},"1a06":function(e,t,n){},"1c40":function(e,t,n){},2:function(e,t){},"2ad1":function(e,t,n){},3:function(e,t){},"30e7":function(e,t,n){},"367b":function(e,t,n){},"3d9a":function(e,t,n){"use strict";n("0eaa")},4:function(e,t){},5:function(e,t,n){e.exports=n("cd49")},"54a4":function(e,t,n){"use strict";n("0963")},"5f77":function(e,t,n){"use strict";n("6d42")},6:function(e,t){},"6bb7":function(e,t,n){"use strict";n("bf29")},"6cf5":function(e,t,n){"use strict";n("2ad1")},"6d42":function(e,t,n){},7:function(e,t){},"7eec":function(e,t,n){"use strict";n("df0d")},8:function(e,t){},9:function(e,t){},a022:function(e,t,n){},bf29:function(e,t,n){},c009:function(e,t,n){"use strict";n("367b")},cd49:function(e,t,n){"use strict";n.r(t);var o=n("2b0e"),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"nav"}},[t("router-link",{attrs:{to:"/"}},[e._v("Preferences")]),e._v(" | "),t("router-link",{attrs:{to:"/scheduling"}},[e._v("Scheduling")]),e._v(" | "),t("router-link",{attrs:{to:"/prepare"}},[e._v("Prepare")])],1),t("router-view")],1)},r=[],a=(n("fe81"),n("2877")),c={},i=Object(a["a"])(c,s,r,!1,null,null,null),l=i.exports,u=(n("14d9"),n("2f62")),f=(n("907a"),n("986a"),n("1d02"),n("3c5d"),n("6ce5"),n("2834"),n("4ea1"),n("1146")),p=n.n(f),d=n("5a0c"),h=n.n(d),v=n("2a04"),b=n.n(v);function g(e="timetable-test.xlsx"){return new Promise((t,n)=>{const o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{const e=new Uint8Array(o.response),n=Object(f["read"])(e,{type:"array",cellDates:!0});t(y(n))},o.onerror=()=>n(),o.send()})}function y(e){const t=e.Sheets[e.SheetNames[0]],n=F(t),o=n.map(L),s=I(o),r=[...new Set(n.map(e=>e["Description"]+" ("+e["Course code"]+")"))],a=T(s).map(e=>e.weeklySlot),c=k(o),i=O(o),l=_(o),u=m(o);return{courseNames:r,bundles:s,askSlots:a,askConsecutiveSessions:c>1,maxConsecutiveSessions:c,askDifferentDays:i>1,maxDifferentDays:i,askGroupTypes:l.length>1,groupTypes:l,askCapabilities:u.length>1,capabilities:u}}function m(e){const t=[...new Set(e.flatMap(e=>e.requiredCapabilities))];return t.sort(),t}function _(e){const t=[...new Set(e.filter(e=>!e.group.plenary).map(e=>e.group.groupType))];return t.sort(),t}function O(e){let t=0;const n=new Set;let o=-1,s=-1;for(const r of e){const e=h()(r.timeSlot.start),a=e.week(),c=e.day(),i=e.year();s===a&&i===o?n.add(c):(t=Math.max(n.size,t),n.clear(),s=a,o=i)}return t}function k(e,t=15){e.sort(A);let n=null,o=0,s=0;for(const r of e){if(null!=n){const e=S(n,r);e>0&&e<=t?(o++,s=Math.max(o,s)):e>0&&(o=0)}n=r}return s}function S(e,t,n=6e4){const o=e.timeSlot.end.getTime(),s=t.timeSlot.start.getTime();return(s-o)/n}function x(e){return 24*e.dayOfWeek*60+60*e.startHour+e.startMinute}function j(e,t){return w(e.weeklySlot,t.weeklySlot)}function w(e,t){return x(e)-x(t)}function A(e,t){const n=e.timeSlot.start.getTime(),o=t.timeSlot.start.getTime(),s=e.timeSlot.end.getTime(),r=t.timeSlot.end.getTime();return n==o?s-r:n-o}function T(e){const t=new Map;for(const[o,s]of e.entries()){const e=P(s.weeklySlot);t.has(e)?t.get(e).push({index:o,...s}):t.set(e,[{index:o,...s}])}const n=[];for(const o of t.values())n.push({weeklySlot:o[0].weeklySlot,bundles:o});return n.sort(j),n}function P(e){return e.dayOfWeek+"__"+e.startHour+"__"+e.startMinute}function D(e,t){return P(e)+"__"+t.name}function C(e,t){const n=t.get(e.name);let o="";if(n){t.set(e.name,n+1);let s=n;while(s>0)if(s>26){const e=s%26;o+=String.fromCharCode(97+e),s=Math.floor(s/26)}else o+=String.fromCharCode(97+s),s=0}else t.set(e.name,1),o="a";return e.name+"-"+o}function I(e,t=!0,n=!0){const o=e.filter(e=>(!e.group.plenary||!t)&&e.canBundle),s=new Map,r=new Map;for(const c of o){const e=N(c),t=c.group,o=D(e,t);if(r.has(o)){var a;null===(a=r.get(o))||void 0===a||a.sessions.push(c)}else{const a=n?C(t,s):t.name;r.set(o,{name:a,group:c.group,weeklySlot:e,sessions:[c]})}}return[...r.values()]}function N(e,t=36e5){const n=e.timeSlot;console.log(n);const o=n.start.getDay(),s=n.start.getHours(),r=n.start.getMinutes(),a=Math.ceil((n.end.getTime()-n.start.getTime())/t);return{dayOfWeek:o,startHour:s,startMinute:r,durationInHours:a}}function L(e,t){const n=e["Course code"],o=e["Start"],s=e["End"],r={start:o,end:s},a=n.endsWith("X")||n.endsWith("S"),c=E(e["Group"],n),i=[];return a?i.push("English"):i.push("Dutch"),{timeSlot:r,staffNeeded:1,canBundle:!0,location:e["Location(s)"],id:t,type:e["Type"],group:c,requiredCapabilities:i}}function E(e,t,n="Group "){const o=e.replace(n,"");if("Plenary"===o)return{groupType:o,plenary:!0,name:o};const s=o.match(/^[A-Za-z]+/),r=o.match(/[0-9]+$/);if(s&&r)return{name:o,groupType:s[0],plenary:!1};const a=t.match(/[A-Za-z]$/);return{name:o+(a?"-"+a[0]:""),groupType:o+(a?"-"+a[0]:""),plenary:!1}}function F(e){const t=e["!ref"];if(!t)throw"Invalid Spreadsheet";const n=f["utils"].decode_range(t);let o=!0;const s=[],r={};console.log(e);for(let a=n.s.r;a<=n.e.r;a++){const t={};for(let s=n.s.c;s<=n.e.c;s++){const n=f["utils"].encode_cell({r:a,c:s}),c=e[n];if(c)if(o)r[s]=c.v;else{const e=r[s];t[e]=c.v}}o?o=!1:s.push(t)}return s}h.a.extend(b.a);var W,M,U,R;n("5b81");function V(e){const t=U[e.dayOfWeek],n=e.startHour<10?"0"+e.startHour:e.startHour,o=e.startMinute<10?"0"+e.startMinute:e.startMinute,s=h()().hour(e.startHour).minute(e.startMinute).add(e.durationInHours,"hours"),r=s.hour()<10?"0"+s.hour():s.hour(),a=s.minute()<10?"0"+s.minute():s.minute();return t+" "+n+":"+o+"-"+r+":"+a}function B(e,t=!0){const n=[...new Set(e.map(e=>h()(e.timeSlot.start).week()))];n.sort();const o=[];let s=-2;for(const a of n)a>s+1?o.push([a]):-1!==s&&o[o.length-1].push(a),s=a;let r="";return t&&e.length>0&&(r="Week",e.length>1&&(r+="s"),r+=" "),r+o.map(H).join(", ")}function G(e){const t="scheduling-"+e.courseNames[0].replaceAll(/[^A-Za-z0-9-_]/g,"_")+".instance.json",n=document.createElement("a"),o=JSON.stringify(e);n.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(o)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function Y(e,t){let n="preferences-"+e.userId.replaceAll(/[^A-Za-z0-9-_]/g,"_")+"-"+t.courseNames[0].replaceAll(/[^A-Za-z0-9-_]/g,"_");n=n.replaceAll(/_*$/g,"").replaceAll(/_+/g,"_"),n+=".preferences.json";const o=document.createElement("a"),s=JSON.stringify(e);o.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(s)),o.setAttribute("download",n),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function $(e){const t=e.instance,n="scheduling-state-"+t.courseNames[0].replaceAll(/[^A-Za-z0-9-_]/g,"_")+".state.json",o=document.createElement("a"),s=JSON.stringify(e);o.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(s)),o.setAttribute("download",n),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function z(e,t){const n=document.createElement("a");n.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function H(e){return e.length>=2?e[0]+"-"+e[e.length-1]:""+e[0]}function J(){return{courseNames:[],bundles:[],askSlots:[],askConsecutiveSessions:!1,maxConsecutiveSessions:1,askDifferentDays:!1,maxDifferentDays:1,askGroupTypes:!1,groupTypes:[],askCapabilities:!1,capabilities:[]}}function Z(e=J()){const t=new Map(e.capabilities.map(e=>[e,!1])),n=new Map(e.askSlots.map(e=>[V(e),W.NEUTRAL])),o=new Map(e.groupTypes.map(e=>[e,W.NEUTRAL])),s="",r="",a=new Map;for(let i=2;i<=e.maxConsecutiveSessions;i++)a.set(i,W.NEUTRAL);const c=new Map;for(let i=1;i<=e.maxDifferentDays;i++)c.set(i,W.NEUTRAL);return{capabilities:Q(t),consecutivePreferences:K(a),groupTypePreferences:q(o),userId:s,differentDaysPreferences:K(c),slotPreferences:q(n),schedulingComment:r}}function X(){return[]}function K(e){const t={};for(const[n,o]of e.entries())t[n]=o;return t}function q(e){const t={};for(const[n,o]of e.entries())t[n]=o;return t}function Q(e){const t={};for(const[n,o]of e.entries())t[n]=o;return t}function ee(e,t,n){let o=e;const s=null===n||void 0===n?void 0:n.toUpperCase();while(null!=o){if(o.tagName===s)return;const e=o.dataset;if(e&&void 0!==e[t])return e[t];o=o.parentElement}}function te(e){let t=0;for(const n of e)t+=ne(n);return t}function ne(e){let t=0;for(const n of e.sessions)t=Math.max(t,n.staffNeeded);return t}function oe(e,t){const n=new Date(e.timeSlot.start),o=new Date(t.timeSlot.start),s=n.getTime()-o.getTime();if(0!==s)return s;const r=new Date(e.timeSlot.end),a=new Date(t.timeSlot.end);return r.getTime()-a.getTime()}function se(e,t,n=!1){const o=n?e:new Map(e);for(const[s,r]of t.entries())if(o.has(s)){let e=o.get(s);e||(e=0),o.set(s,e+r)}else o.set(s,r);return o}function re(e){let t=-1/0;for(const n of e.values())t=Math.max(t,n);return t}function ae(e){console.log(e);const t=[];let n=0;for(const o of e.bundles){const e=ne(o);for(let s=0;s<e;s++)t.push({index:n,...o}),n++}return t}function ce(e,t,n){const o=[];for(let s=0;s<t.length+1;s++)o[s]=[];for(let s=0;s<e.length;s++){const t=e[s],r=n[s];-1!=t?o[t].push(r):o[o.length-1].push(r)}return o}function ie(e,t,n){const o=[];for(const s of e.askSlots){const e=V(s),r=[];for(let o=0;o<n.length+1;o++){const n=t[o].filter(t=>V(t.weeklySlot)===e);r.push(n)}o.push(r)}return o}function le(e,t){const n=[];for(let o=0;o<e.length;o++){let e=0;for(const n of t[o])e+=ge(n);n.push(e)}return n}function ue(e,t){const n=[];for(let o=0;o<e.length;o++){const e=_e(t[o]);let s=0;for(const t of e.values())s=Math.max(s,t);n.push(s)}return n}function fe(e,t,n){const o=new Array(e.length);for(let s=0;s<o.length;s++)o[s]=[];for(let s=0;s<t.length;s++){const e=t[s].preferences,r=n[s];for(const t of r){e:for(const s of t.sessions)for(const n of s.requiredCapabilities)if(!e.capabilities[n]){const s={type:R.CAPABILITY_VIOLATION,text:`${e.userId} does not have capability '${n}' required to teach one or more sessions in bundle ${t.name}`};o[t.index].push(s);break e}const n=V(t.weeklySlot);if(!e.slotPreferences[n]||e.slotPreferences[n]===W.UNAVAILABLE){const s={type:R.TIMESLOT_VIOLATION,text:`${e.userId} is unavailable at time slot ${n} to teach sessions in bundle ${t.name}`};o[t.index].push(s)}}for(let t=0;t<r.length;t++)for(let n=t+1;n<r.length;n++){const s=r[t],a=r[n];if(Oe(s,a)){const t={type:R.OVERLAP_VIOLATION,text:`${e.userId} teaches both bundle ${s.name} and ${a.name}, but these have sessions that overlap in time.`};o[s.index].push(t),o[a.index].push(t)}}}return o}function pe(e,t){switch(t){case W.FAVORED:return e.favoredScore;case W.STRONGLY_FAVORED:return e.stronglyFavoredScore;case W.NEUTRAL:return e.neutralScore;case W.UNFAVORED:return e.unfavoredScore;case W.STRONGLY_UNFAVORED:return e.stronglyUnfavoredScore;case W.UNAVAILABLE:return e.unavailableScore}return console.log(t),e.neutralScore}function de(e,t,n){const o=new Date(e.timeSlot.end).getTime(),s=new Date(t.timeSlot.start).getTime(),r=(s-o)/6e4;return r<=n.consecutiveThresholdMinutes}function he(e,t){const n=[];let o=0,s=null;for(const r of e)null==s?o=0:de(s,r,t)||(n.push(o),o=0),o++,s=r;return n.push(o),n}function ve(e,t,n,o,s,r){let a=0;a+=e.uncoveredScore*t.filter(e=>-1==e).length;const c=new Map;for(let i=0;i<n.length;i++){const t=n[i],s=t.preferences,r=[];for(const n of o[i]){const t=n.sessions.length,o=V(n.weeklySlot),l=s.slotPreferences[o],u=pe(e,l);a+=e.slotPreferenceFactor*u*t;const f=s.groupTypePreferences[n.group.groupType],p=pe(e,f);a+=e.groupPreferenceFactor*p*t;for(const e of n.sessions)r.push(e);const d=n.group.name;c.has(d)||c.set(d,new Set),c.get(d).add(i)}r.sort(oe);const l=he(r,e);for(const n of l){const t=s.consecutivePreferences[n];t&&(a+=pe(e,t)*e.consecutiveSessionFactor)}const u=new Map;for(const e of r){const t=h()(e.timeSlot.start),n=t.week(),o=t.day();u.has(n)||u.set(n,new Set),u.get(n).add(o)}for(const n of u.values()){const t=n.size,o=s.differentDaysPreferences[t];o&&(a+=e.multipleDayFactor*pe(e,o))}}for(const i of c.values()){const t=i.size,n=Math.max(0,t-1);a+=e.multiTAFactor*Math.pow(n,e.multiTAExponent)}for(const i of s)a+=e.violationScore*i.length;return a+=e.violationScore*r.length,a}function be(e,t,n){const o=[];for(const[s,r]of n.entries())e[s]>r.totalWorkload&&o.push({type:R.WORKLOAD_VIOLATION,text:`Maximum total workload of ${r.preferences.userId} violated`}),t[s]>r.maxWeeklyWorkload&&o.push({type:R.WORKLOAD_VIOLATION,text:`Maximum weekly workload of ${r.preferences.userId} violated`});return o}function ge(e){let t=0;for(const n of e.sessions){const e=new Date(n.timeSlot.start),o=new Date(n.timeSlot.end);t+=(o.getTime()-e.getTime())/36e5}return t}function ye(e,t){const n=[];for(const[o,s]of e.entries()){const e=s.preferences.userId;for(const s of t[o])for(const t of s.sessions)n.push({...t,userId:e})}return n}function me(e){const t=new Map;for(const n of e.sessions){const e=new Date(n.timeSlot.start),o=new Date(n.timeSlot.end),s=(o.getTime()-e.getTime())/36e5,r=h()(e).week();t.has(r)?t.set(r,t.get(r)+s):t.set(r,s)}return t}function _e(e){const t=new Map;for(const n of e){const e=me(n);se(t,e,!0)}return t}function Oe(e,t){for(const n of e.sessions){const e=new Date(n.timeSlot.start).getTime(),o=new Date(n.timeSlot.end).getTime();for(const n of t.sessions){const t=new Date(n.timeSlot.start).getTime(),s=new Date(n.timeSlot.end).getTime();if(e<=s&&o>=t)return!0}}return!1}function ke(e){return e.map(ge)}function Se(e,t,n,o){console.log(e);const s=ae(e),r=ce(n,t,s),a=ie(e,r,t),c=le(t,r),i=ue(t,r),l=fe(s,t,r),u=be(c,i,t),f=ve(o,n,t,r,l,u),p=ye(t,r);return{instance:e,availability:t,assignment:n,bundles:s,bundlesPerTa:r,matrix:a,workloads:c,weeklyWorkloads:i,workloadViolations:u,bundleViolations:l,objective:f,assignedSessions:p}}function xe(e,t){return Se(e.instance,e.taAvailability,t||e.currentAssignment,e.configuration)}function je(){return{stronglyFavoredScore:3,favoredScore:1,neutralScore:0,unfavoredScore:-1,stronglyUnfavoredScore:-3,unavailableScore:-50,slotPreferenceFactor:1,groupPreferenceFactor:.25,consecutiveSessionFactor:1,multipleDayFactor:1,multiTAExponent:1.5,multiTAFactor:-5,violationScore:-100,uncoveredScore:-250,consecutiveThresholdMinutes:20}}(function(e){e["UNAVAILABLE"]="UNAVAILABLE",e["STRONGLY_UNFAVORED"]="STRONGLY_UNFAVORED",e["UNFAVORED"]="UNFAVORED",e["NEUTRAL"]="NEUTRAL",e["FAVORED"]="FAVORED",e["STRONGLY_FAVORED"]="STRONGLY_FAVORED"})(W||(W={})),function(e){e["UNAVAILABLE"]="#888888",e["STRONGLY_UNFAVORED"]="#ff6b6b",e["UNFAVORED"]="#ffadad",e["NEUTRAL"]="#fffa70",e["FAVORED"]="#ccffcc",e["STRONGLY_FAVORED"]="#75ff75"}(M||(M={})),function(e){e[e["SUNDAY"]=0]="SUNDAY",e[e["MONDAY"]=1]="MONDAY",e[e["TUESDAY"]=2]="TUESDAY",e[e["WEDNESDAY"]=3]="WEDNESDAY",e[e["THURSDAY"]=4]="THURSDAY",e[e["FRIDAY"]=5]="FRIDAY",e[e["SATURDAY"]=6]="SATURDAY"}(U||(U={})),h.a.extend(b.a),h.a.extend(b.a),function(e){e[e["CAPABILITY_VIOLATION"]=0]="CAPABILITY_VIOLATION",e[e["TIMESLOT_VIOLATION"]=1]="TIMESLOT_VIOLATION",e[e["OVERLAP_VIOLATION"]=2]="OVERLAP_VIOLATION",e[e["WORKLOAD_VIOLATION"]=3]="WORKLOAD_VIOLATION"}(R||(R={})),o["a"].use(u["a"]);var we=new u["a"].Store({state:{instance:J(),preferences:Z(),taAvailability:X(),currentAssignment:new Array(0).fill(-1),configuration:je()},mutations:{setInstance(e,t){e.instance=t,e.preferences=Z(t),e.currentAssignment=new Array(te(t.bundles)).fill(-1)},setCapability(e,t){o["a"].set(e.preferences.capabilities,t.capability,t.status)},setConsecutivePref(e,t){o["a"].set(e.preferences.consecutivePreferences,t.key,t.preference)},setDifferentDaysPref(e,t){o["a"].set(e.preferences.differentDaysPreferences,t.key,t.preference)},setGroupTypePref(e,t){o["a"].set(e.preferences.groupTypePreferences,t.key,t.preference)},setSlotPref(e,t){o["a"].set(e.preferences.slotPreferences,V(t.weeklySlot),t.preference)},setUserId(e,t){o["a"].set(e.preferences,"userId",t)},setSchedulingComment(e,t){o["a"].set(e.preferences,"schedulingComment",t)},setTAPreferences(e,t){e.taAvailability=t},addTAPreferences(e,t){console.log(e,t),e.taAvailability.push({totalWorkload:32,maxWeeklyWorkload:4,preferences:t})},assignBundleToTa(e,t){o["a"].set(e.currentAssignment,t.bundleIndex,t.taIndex)},setAssignment(e,t){o["a"].set(e,"currentAssignment",t)},setTotalWorkload(e,t){o["a"].set(e.taAvailability[t.index],"totalWorkload",t.value)},setMaxWeeklyWorkload(e,t){o["a"].set(e.taAvailability[t.index],"maxWeeklyWorkload",t.value)},setConfiguration(e,t){o["a"].set(e,"configuration",t)},importState(e,t){e.configuration=t.configuration,e.instance=t.instance,e.taAvailability=t.taAvailability,e.currentAssignment=t.currentAssignment,e.preferences=Z(t.instance)}},getters:{bundlesPerSlot(e){var t;const n=new Map,o=null===e||void 0===e||null===(t=e.instance)||void 0===t?void 0:t.bundles;if(o){const e=T(o);for(const t of e.values()){const e=t.weeklySlot,o=t.bundles,s=V(e);n.set(s,o)}}return n},scheduleInformation(e){return Se(e.instance,e.taAvailability,e.currentAssignment,e.configuration)},fullState(e){return{instance:e.instance,taAvailability:e.taAvailability,currentAssignment:e.currentAssignment,configuration:e.configuration}}},actions:{loadInstance(e,t){if(console.log(t),t.data){const n=JSON.parse(t.data);e.commit("setInstance",n)}else if(t.url)return fetch(t.url).then(e=>e.json()).then(t=>{e.commit("setInstance",t)}).catch(e=>{console.log(e)})}}}),Ae=n("f309");o["a"].use(Ae["a"]);var Te=new Ae["a"]({}),Pe=n("8c4f"),De=n("7496"),Ce=n("8336"),Ie=n("62ad"),Ne=n("a523"),Le=n("f6c4"),Ee=n("0fd9"),Fe=n("7e85"),We=n("e516"),Me=n("56a4"),Ue=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(De["a"],[t(Le["a"],[t(Ne["a"],{staticClass:"text-left"},[t(Ee["a"],[t(Ie["a"],[t(Fe["a"],{attrs:{"non-linear":"",vertical:""},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[t(Me["a"],{attrs:{editable:"",step:"1"}},[e._v("Introduction")]),t(We["a"],{attrs:{step:"1"}},[t("welcome"),t(Ce["a"],{attrs:{color:"primary"},on:{click:e.next}},[e._v("Next")]),e._v("   ")],1),t(Me["a"],{attrs:{editable:"",step:"2"}},[e._v("Name and Capabilities")]),t(We["a"],{attrs:{step:"2"}},[t("capabilities"),t(Ce["a"],{attrs:{color:"primary"},on:{click:e.next}},[e._v("Next")]),e._v("   "),t(Ce["a"],{attrs:{color:"secondary"},on:{click:e.prev}},[e._v("Back")])],1),e.isActive(3)?[t(Me["a"],{attrs:{editable:e.isActive(3),step:"3"}},[e._v("Timeslots")]),t(We["a"],{attrs:{step:"3"}},[t("slot-preferences"),t(Ce["a"],{attrs:{color:"primary"},on:{click:e.next}},[e._v("Next")]),e._v("   "),t(Ce["a"],{attrs:{color:"secondary"},on:{click:e.prev}},[e._v("Back")])],1)]:e._e(),e.isActive(4)?[t(Me["a"],{attrs:{editable:e.isActive(4),step:"4"}},[e._v("Groups")]),t(We["a"],{attrs:{step:"4"}},[t("group-preferences"),t(Ce["a"],{attrs:{color:"primary"},on:{click:e.next}},[e._v("Next")]),e._v("   "),t(Ce["a"],{attrs:{color:"secondary"},on:{click:e.prev}},[e._v("Back")])],1)]:e._e(),e.isActive(5)?[t(Me["a"],{attrs:{editable:e.isActive(5),step:"5"}},[e._v("Consecutive Classes")]),t(We["a"],{attrs:{step:"5"}},[t("consecutive-preferences"),t(Ce["a"],{attrs:{color:"primary"},on:{click:e.next}},[e._v("Next")]),e._v("   "),t(Ce["a"],{attrs:{color:"secondary"},on:{click:e.prev}},[e._v("Back")])],1)]:e._e(),e.isActive(6)?[t(Me["a"],{attrs:{editable:e.isActive(6),step:"6"}},[e._v("Different Days")]),t(We["a"],{attrs:{step:"6"}},[t("different-days-preferences"),t(Ce["a"],{attrs:{color:"primary"},on:{click:e.next}},[e._v("Next")]),e._v("   "),t(Ce["a"],{attrs:{color:"secondary"},on:{click:e.prev}},[e._v("Back")])],1)]:e._e(),t(Me["a"],{attrs:{editable:"",step:"7"}},[e._v("Wrap Up")]),t(We["a"],{attrs:{step:"7"}},[t("wrap-up"),t(Ce["a"],{attrs:{color:"secondary"},on:{click:e.prev}},[e._v("Back")])],1)],2)],1)],1)],1)],1)],1)},Re=[],Ve=n("9ab4"),Be=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ne["a"],[t(Ee["a"],[t(Ie["a"],[t("h3",[e._v("Collecting Scheduling Preferences")]),t("p",[e._v("With this application you can provide your scheduling preferences for your work as a TA in the following courses: ")]),t("ul",e._l(e.instance.courseNames,(function(n){return t("li",{key:n},[e._v(" "+e._s(n)+" ")])})),0),t("br"),t("p",[e._v(" You will have to e-mail a file containing your preferences by e-mail. You can obtain this file during the final step. ")]),t("p",[e._v(" Please go through all the steps and review your preferences carefully. ")])])],1)],1)},Ge=[],Ye=n("1b40"),$e=n("4bb5");let ze=class extends Ye["e"]{};Object(Ve["a"])([Object($e["c"])("instance")],ze.prototype,"instance",void 0),ze=Object(Ve["a"])([Ye["a"]],ze);var He=ze,Je=He,Ze=(n("6bb7"),Object(a["a"])(Je,Be,Ge,!1,null,"6ff815ca",null)),Xe=Ze.exports,Ke=n("0798"),qe=n("b0af"),Qe=n("99d9"),et=n("ac7c"),tt=n("8654"),nt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ne["a"],[t(Ee["a"],[t(Ie["a"],{attrs:{cols:"12"}},[t("h3",[e._v("Please fill in your name")]),t(tt["a"],{staticClass:"limit-width",attrs:{label:"Give your name"},on:{change:e.setName}})],1)],1),e.instance.askCapabilities?[t(Ee["a"],[t(Ie["a"],{attrs:{cols:"12"}},[t("h3",[e._v("Please indicate teaching capabilities")])])],1),t(Ee["a"],[t(Ie["a"],{attrs:{cols:"12"}},[t(qe["a"],{staticClass:"limit-width",attrs:{elevation:"2",tile:""}},[t(Qe["b"],[e._v(" Please indicate if you have one or more of the following capabilities for teaching classes "),e.selected<=0?t(Ke["a"],{staticClass:"limit-width",attrs:{type:"warning"}},[e._v(" You currently have no capabilities selected. This is likely incorrect. ")]):e._e(),e._l(e.instance.capabilities,(function(n,o){return t("div",{key:"row-"+o,staticClass:"spaced"},[t(et["a"],{attrs:{label:n},on:{change:t=>e.change(n,t)}})],1)}))],2)],1)],1)],1)]:e._e()],2)},ot=[];let st=class extends Ye["e"]{change(e,t){this.setCapability({capability:e,status:t})}get selected(){return Object.values(this.preferences.capabilities).filter(e=>e).length}};Object(Ve["a"])([Object($e["c"])("instance")],st.prototype,"instance",void 0),Object(Ve["a"])([Object($e["c"])("preferences")],st.prototype,"preferences",void 0),Object(Ve["a"])([Object($e["b"])("setCapability")],st.prototype,"setCapability",void 0),Object(Ve["a"])([Object($e["b"])("setUserId")],st.prototype,"setName",void 0),st=Object(Ve["a"])([Ye["a"]],st);var rt=st,at=rt,ct=(n("54a4"),Object(a["a"])(at,nt,ot,!1,null,"10052e32",null)),it=ct.exports,lt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ne["a"],[t(Ee["a"],[t(Ie["a"],{attrs:{cols:"12"}},[t("h3",[e._v("Please indicate for the following time slots your availability and preference")])])],1),t(Ee["a"],e._l(e.instance.askSlots,(function(e,n){return t(Ie["a"],{key:"col-"+n,attrs:{cols:"12",sm:"10",md:"6",lg:"4",xl:"3"}},[t("weekly-slot-preference",{staticStyle:{"min-height":"16em"},attrs:{weeklySlot:e}})],1)})),1)],1)},ut=[],ft=n("cc20"),pt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(qe["a"],{attrs:{elevation:"2",tile:""}},[t(Qe["c"],[e._v(e._s(e.title))]),t(Qe["b"],{attrs:{align:"left"}},[t("preference-select",{on:{change:e.setPref}}),t("h5",[e._v("Sessions currently scheduled")]),e._l(e.bundles,(function(n,o){return t(ft["a"],{key:"bdl-"+o,staticClass:"spaced"},[e._v(" "+e._s(n.name)+" ("+e._s(e.weekNumbers[o])+") ")])}))],2)],1)},dt=[],ht=n("b974"),vt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(ht["a"],{attrs:{items:e.items,value:e.preference,"background-color":e.backgroundColor,label:"Select your Preference"},on:{change:e.changePreference}})},bt=[];let gt=class extends Ye["e"]{constructor(){super(...arguments),this.preference=W.NEUTRAL}changePreference(e){this.preference=e,this.$emit("change",this.preference)}get excludes(){return this.allowUnavailable?[]:[W.UNAVAILABLE]}get items(){return Object.keys(W).filter(e=>!this.excludes.includes(e))}get backgroundColor(){return M[this.preference]}};Object(Ve["a"])([Object(Ye["c"])({default:!0})],gt.prototype,"allowUnavailable",void 0),gt=Object(Ve["a"])([Ye["a"]],gt);var yt=gt,mt=yt,_t=Object(a["a"])(mt,vt,bt,!1,null,null,null),Ot=_t.exports;let kt=class extends Ye["e"]{get bundles(){const e=V(this.weeklySlot);if(this.bundlesPerSlot.has(e)){const t=this.bundlesPerSlot.get(e);if(t)return t}return[]}get weekNumbers(){return this.bundles.map(e=>B(e.sessions))}get title(){if(!this.weeklySlot)return"";const e=this.weeklySlot;return V(e)}setPref(e){this.setSlotPref({weeklySlot:this.weeklySlot,preference:e})}};Object(Ve["a"])([Object(Ye["c"])()],kt.prototype,"weeklySlot",void 0),Object(Ve["a"])([Object($e["a"])("bundlesPerSlot")],kt.prototype,"bundlesPerSlot",void 0),Object(Ve["a"])([Object($e["b"])("setSlotPref")],kt.prototype,"setSlotPref",void 0),kt=Object(Ve["a"])([Object(Ye["a"])({components:{PreferenceSelect:Ot}})],kt);var St=kt,xt=St,jt=(n("7eec"),Object(a["a"])(xt,pt,dt,!1,null,"58a224cc",null)),wt=jt.exports;let At=class extends Ye["e"]{constructor(){super(...arguments),this.instance=void 0}downloadTestJson(){g().then(e=>{const t="scheduling-"+e.courseNames[0].replaceAll(/[^A-Za-z0-9-_]/g,"_")+".json",n=document.createElement("a"),o=JSON.stringify(e);n.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(o)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)})}};Object(Ve["a"])([Object($e["c"])("instance")],At.prototype,"instance",void 0),At=Object(Ve["a"])([Object(Ye["a"])({components:{WeeklySlotPreference:wt}})],At);var Tt=At,Pt=Tt,Dt=Object(a["a"])(Pt,lt,ut,!1,null,null,null),Ct=Dt.exports,It=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("key-preferences",{attrs:{keys:e.instance.groupTypes,keyTransform:e.transform,instruction:"Please indicate your preferences related to group types",allowUnavailable:!1},on:{change:e.change}})},Nt=[],Lt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ne["a"],[t(Ee["a"],[t(Ie["a"],{attrs:{cols:"12"}},[t("h3",[e._v(e._s(e.instruction))])])],1),t(Ee["a"],e._l(e.keys,(function(n,o){return t(Ie["a"],{key:"col-"+o,attrs:{cols:"12",md:"6",xl:"4"}},[t(qe["a"],{attrs:{elevation:"2",tile:""}},[t(Qe["b"],[e._v(e._s(e.transformed[o]))]),t(Qe["a"],[t("preference-select",{attrs:{allowUnavailable:e.allowUnavailable},on:{change:t=>e.change(n,t)}})],1)],1)],1)})),1)],1)},Et=[];let Ft=class extends Ye["e"]{change(e,t){return{key:e,preference:t}}get transformed(){const e=[];for(const t of this.keys)this.keyTransform?e.push(this.keyTransform(t).toString()):e.push(t.toString());return e}};Object(Ve["a"])([Object(Ye["c"])()],Ft.prototype,"instruction",void 0),Object(Ve["a"])([Object(Ye["c"])()],Ft.prototype,"keys",void 0),Object(Ve["a"])([Object(Ye["c"])()],Ft.prototype,"keyTransform",void 0),Object(Ve["a"])([Object(Ye["c"])()],Ft.prototype,"allowUnavailable",void 0),Object(Ve["a"])([Object(Ye["b"])("change")],Ft.prototype,"change",null),Ft=Object(Ve["a"])([Object(Ye["a"])({components:{PreferenceSelect:Ot}})],Ft);var Wt=Ft,Mt=Wt,Ut=Object(a["a"])(Mt,Lt,Et,!1,null,null,null),Rt=Ut.exports;let Vt=class extends Ye["e"]{constructor(){super(...arguments),this.instance=void 0}transform(e){return"Your preference with regarding to teaching groups of type "+e}};Object(Ve["a"])([Object($e["c"])("instance")],Vt.prototype,"instance",void 0),Object(Ve["a"])([Object($e["b"])("setGroupTypePref")],Vt.prototype,"change",void 0),Vt=Object(Ve["a"])([Object(Ye["a"])({components:{KeyPreferences:Rt}})],Vt);var Bt=Vt,Gt=Bt,Yt=Object(a["a"])(Gt,It,Nt,!1,null,null,null),$t=Yt.exports,zt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("key-preferences",{attrs:{keys:e.consecutive,keyTransform:e.transform,instruction:"Please indicate your preferences to teach multiple classes directly after each other (back to back)",allowUnavailable:!1},on:{change:e.change}})},Ht=[];let Jt=class extends Ye["e"]{constructor(){super(...arguments),this.instance=void 0}get consecutive(){const e=[];if(this.instance)for(let t=2;t<=this.instance.maxConsecutiveSessions;t++)e.push(t);return e}transform(e){return"Your preference of teaching "+e+" classes consecutively"}};Object(Ve["a"])([Object($e["c"])("instance")],Jt.prototype,"instance",void 0),Object(Ve["a"])([Object($e["b"])("setConsecutivePref")],Jt.prototype,"change",void 0),Jt=Object(Ve["a"])([Object(Ye["a"])({components:{KeyPreferences:Rt}})],Jt);var Zt=Jt,Xt=Zt,Kt=Object(a["a"])(Xt,zt,Ht,!1,null,null,null),qt=Kt.exports,Qt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("key-preferences",{attrs:{keys:e.consecutive,keyTransform:e.transform,instruction:"Please indicate your preferences to teach classes spread out over one or multiple days",allowUnavailable:!1},on:{change:e.change}})},en=[];let tn=class extends Ye["e"]{constructor(){super(...arguments),this.instance=void 0}get consecutive(){const e=[];if(this.instance)for(let t=2;t<=this.instance.maxConsecutiveSessions;t++)e.push(t);return e}transform(e){return"Your preference of teaching "+e+" different weekdays"}};Object(Ve["a"])([Object($e["c"])("instance")],tn.prototype,"instance",void 0),Object(Ve["a"])([Object($e["b"])("setDifferentDaysPref")],tn.prototype,"change",void 0),tn=Object(Ve["a"])([Object(Ye["a"])({components:{KeyPreferences:Rt}})],tn);var nn=tn,on=nn,sn=Object(a["a"])(on,Qt,en,!1,null,null,null),rn=sn.exports,an=n("a844"),cn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ne["a"],[t(Ee["a"],[t(Ie["a"],[t("h3",[e._v("Wrap-Up")]),t("h5",[e._v("Comments to Scheduler")]),t("p",[e._v("If you have any comments to scheduler, you can type them in this textbox.")]),t(an["a"],{staticStyle:{"max-width":"40em"},attrs:{rows:"5",outlined:""},on:{change:e.setComment}}),t("h5",[e._v("Submit your Preferences")]),t("p",[e._v("Now that you passed through all steps, you can finalize your choices. Use the following button to obtain a file with all your preferences. ")]),t(Ce["a"],{staticClass:"spaced",attrs:{color:"primary"},on:{click:e.download}},[e._v("Download Preferences")]),t("p",[e._v(" Please make sure to send your preferences to the course coordinator! ")])],1)],1)],1)},ln=[];let un=class extends Ye["e"]{download(){Y(this.preferences,this.instance)}};Object(Ve["a"])([Object($e["c"])("instance")],un.prototype,"instance",void 0),Object(Ve["a"])([Object($e["c"])("preferences")],un.prototype,"preferences",void 0),Object(Ve["a"])([Object($e["b"])("setSchedulingComment")],un.prototype,"setComment",void 0),un=Object(Ve["a"])([Ye["a"]],un);var fn=un,pn=fn,dn=(n("5f77"),Object(a["a"])(pn,cn,ln,!1,null,"25f42562",null)),hn=dn.exports;let vn=class extends Ye["e"]{constructor(){super(...arguments),this.step=1}isActive(e){if(this.instance){if(0==this.instance.askSlots.length&&3==e)return!1;if(!this.instance.askGroupTypes&&4==e)return!1;if(!this.instance.askConsecutiveSessions&&5==e)return!1;if(!this.instance.askDifferentDays&&6==e)return!1}return!0}next(){this.step++;while(!this.isActive(this.step))this.step++}prev(){this.step--;while(!this.isActive(this.step))this.step--}};Object(Ve["a"])([Object($e["c"])("instance")],vn.prototype,"instance",void 0),vn=Object(Ve["a"])([Object(Ye["a"])({components:{Welcome:Xe,Capabilities:it,SlotPreferences:Ct,GroupPreferences:$t,ConsecutivePreferences:qt,DifferentDaysPreferences:rn,WrapUp:hn}})],vn);var bn=vn,gn=bn,yn=Object(a["a"])(gn,Ue,Re,!1,null,null,null),mn=yn.exports,_n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(De["a"],[t(Le["a"],[t(Ne["a"],{staticClass:"text-left",attrs:{fluid:""}},[t(Ee["a"],[t(Ie["a"],[t(Fe["a"],{attrs:{"non-linear":"",vertical:""},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[t(Me["a"],{attrs:{editable:"",step:"1"}},[e._v("Introduction")]),t(We["a"],{attrs:{step:"1"}},[t("welcome",{on:{stateload:function(t){e.step=5}}}),t("br"),t(Ce["a"],{attrs:{color:"primary"},on:{click:e.next}},[e._v("Next")]),e._v("   ")],1),t(Me["a"],{attrs:{editable:"",step:"2"}},[e._v("Load preferences")]),t(We["a"],{attrs:{step:"2"}},[t("loadtapreferences"),t(Ce["a"],{attrs:{color:"primary"},on:{click:e.next}},[e._v("Next")]),e._v("   "),t(Ce["a"],{attrs:{color:"secondary"},on:{click:e.prev}},[e._v("Back")])],1),t(Me["a"],{attrs:{editable:"",step:"3"}},[e._v("TA Employment Properties")]),t(We["a"],{attrs:{step:"3"}},[t("employment"),t("br"),t(Ce["a"],{attrs:{color:"primary"},on:{click:e.next}},[e._v("Next")]),e._v("   "),t(Ce["a"],{attrs:{color:"secondary"},on:{click:e.prev}},[e._v("Back")])],1),[t(Me["a"],{attrs:{editable:"",step:"4"}},[e._v("Scheduling Configuration")]),t(We["a"],{attrs:{step:"4"}},[t("scheduling-configuration-page"),t("br"),t(Ce["a"],{attrs:{color:"primary"},on:{click:e.next}},[e._v("Next")]),e._v("   "),t(Ce["a"],{attrs:{color:"secondary"},on:{click:e.prev}},[e._v("Back")])],1)],[t(Me["a"],{attrs:{editable:"",step:"5"}},[e._v("Create Schedule")]),t(We["a"],{attrs:{step:"5"}},[t("scheduling-table"),t(Ce["a"],{attrs:{color:"primary"},on:{click:e.next}},[e._v("Next")]),e._v("   "),t(Ce["a"],{attrs:{color:"secondary"},on:{click:e.prev}},[e._v("Back")])],1)],[t(Me["a"],{attrs:{editable:"",step:"6"}},[e._v("Export Schedule")]),t(We["a"],{attrs:{step:"6"}},[t("wrap-up"),t("br"),t(Ce["a"],{attrs:{color:"secondary"},on:{click:e.prev}},[e._v("Back")])],1)]],2)],1)],1)],1)],1)],1)},On=[],kn=n("ce7e"),Sn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ne["a"],[t(Ee["a"],[t(Ie["a"],[t("h3",[e._v("Welcome")]),t("p",[e._v("In this part of the application, you can schedule TA's.")]),t(kn["a"]),t("h5",[e._v("Import scheduling state from a .json file")]),t("FileDropZone",{attrs:{accept:".state.json"},on:{change:e.change}})],1)],1)],1)},xn=[],jn=n("132d"),wn=n("8dd9"),An=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(wn["a"],{staticClass:"pa-2 sheet",attrs:{tabindex:"0",title:"Click to grap a file from your PC!",color:"secondary lighten-4",width:"100%"},on:{dragenter:e.dragStart,dragover:e.dragStart,dragleave:e.dragEnd,drop:e.drop,click:function(t){return e.$refs.inputEl.click()}}},[t("input",{ref:"inputEl",staticClass:"hidden",attrs:{type:"file",accept:e.accept},on:{change:e.changeFile}}),t(Ne["a"],[e.currentFiles?e._e():t(Ee["a"],{attrs:{justify:"center"}},[e.error?t(jn["a"],{attrs:{color:"black",size:"75"}},[e._v("mdi-alert-box-outline")]):e.dragover&&!e.error?t(jn["a"],{attrs:{color:"black",size:"75"}},[e._v("mdi-plus-box-outline")]):t(jn["a"],{attrs:{color:"black",size:"75"}},[e._v("mdi-cloud-upload-outline")])],1),e.currentFiles?e._e():t(Ee["a"],{attrs:{justify:"center"}},[t("span",{staticClass:"title"},[e._v("Drag'n drop or click to upload file"+e._s(this.allowMultiple?"(s)":"")+"!")])]),e.currentFiles?t(Ee["a"],{attrs:{justify:"center"}},[t("div",{staticClass:"selection-box"},[t("h3",[e._v("Selected files:")]),e._l(e.currentFiles,(function(n,o){return t(ft["a"],{key:"file-"+o,staticClass:"spacing",attrs:{small:""}},[e._v(e._s(n.name))])}))],2)]):e._e(),!e.currentFiles&&!e.error||e.dragover?e._e():t(Ee["a"],{attrs:{justify:"center"}},[e.error?e._e():t(Ce["a"],{attrs:{color:"primary"},on:{click:function(t){return t.stopPropagation(),e.submit.apply(null,arguments)}}},[e._v("Submit")]),e.error?e._e():t("span",{staticStyle:{width:"3em"}}),t(Ce["a"],{attrs:{color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.clear.apply(null,arguments)}}},[e._v("Clear")])],1)],1)],1),e.error?t(Ke["a"],{attrs:{type:"error"}},[e._v(" "+e._s(e.error)+" ")]):e._e()],1)},Tn=[];let Pn=class extends Ye["e"]{constructor(){super(),this.dragover=!1,this.error=null,this.currentFiles=null}dragStart(e){this.dragging(e,!0)}dragEnd(e){this.dragging(e,!1)}dragging(e,t){e.preventDefault(),this.dragover=t,e.dataTransfer&&e.dataTransfer.items,t||(this.error=null)}checkValidFile(e){if(!this.accept)return!0;for(const t of this.acceptOptions)if(e.name.endsWith(t))return!0;return!!this.acceptOptions.includes(e.type)}validate(e){if(!this.allowMultiple&&1!=e.length)return"Only a single file is supported";for(const t of e)if(this.accept&&!this.checkValidFile(t))return this.acceptError?this.acceptError:"Only files of type '"+this.accept+"' are supported";return null}drop(e){if(e.preventDefault(),e.dataTransfer){const t=e.dataTransfer.files,n=this.validate(t);null==n?(this.currentFiles=t,this.error=null,this.autoSubmit&&this.submit()):this.error=n}this.dragover=!1}changeFile(e){const t=e.target,n=t.files,o=this.validate(n);null==o?(this.currentFiles=n,this.autoSubmit&&this.submit()):this.error=o}clear(){this.currentFiles=null,this.error=null,this.$refs.inputEl.value=""}submit(){const e=this.currentFiles;return this.currentFiles=null,e}get acceptOptions(){return this.accept?this.accept.split(",").map(e=>e.trim()):[]}};Object(Ve["a"])([Object(Ye["c"])({default:""})],Pn.prototype,"accept",void 0),Object(Ve["a"])([Object(Ye["c"])({default:null})],Pn.prototype,"acceptError",void 0),Object(Ve["a"])([Object(Ye["c"])({default:!1})],Pn.prototype,"autoSubmit",void 0),Object(Ve["a"])([Object(Ye["c"])({default:!1})],Pn.prototype,"allowMultiple",void 0),Object(Ve["a"])([Object(Ye["b"])("change")],Pn.prototype,"submit",null),Pn=Object(Ve["a"])([Ye["a"]],Pn);var Dn=Pn,Cn=Dn,In=(n("e37e"),Object(a["a"])(Cn,An,Tn,!1,null,"e2269cb2",null)),Nn=In.exports;let Ln=class extends Ye["e"]{stateLoaded(){}change(e){if(e){const t=e[0],n=new FileReader;n.addEventListener("load",this.processFile),n.readAsText(t)}}processFile(e){var t;const n=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.result;if(n)try{const e=JSON.parse(n);this.importState(e),this.stateLoaded()}catch(o){console.log(o)}}};Object(Ve["a"])([Object($e["b"])("importState")],Ln.prototype,"importState",void 0),Object(Ve["a"])([Object(Ye["b"])("stateload")],Ln.prototype,"stateLoaded",null),Ln=Object(Ve["a"])([Object(Ye["a"])({components:{FileDropZone:Nn}})],Ln);var En=Ln,Fn=En,Wn=(n("f110"),Object(a["a"])(Fn,Sn,xn,!1,null,"7bad4297",null)),Mn=Wn.exports,Un=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ne["a"],[t(Ee["a"],[t(Ie["a"],[t("h3",[e._v("Load TA preferences")]),t("FileDropZone",{attrs:{accept:".preferences.json",allowMultiple:!0},on:{change:e.change}}),e.taAvailability&&e.taAvailability.length>0?t("div",[t("h3",[e._v("Preferences for the following TA's are now loaded")]),e._l(e.taAvailability,(function(n,o){return t(ft["a"],{key:"ta_"+o,staticClass:"chip-spacing"},[e._v(e._s(n.preferences.userId))])}))],2):e._e()],1)],1)],1)},Rn=[];let Vn=class extends Ye["e"]{change(e){if(e)for(const t of e){const e=new FileReader;e.addEventListener("load",this.processFile),e.readAsText(t)}}processFile(e){var t;const n=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.result;if(n)try{const e=JSON.parse(n);this.addTAPreferences(e)}catch(o){console.log(o)}}};Object(Ve["a"])([$e["c"]],Vn.prototype,"taAvailability",void 0),Object(Ve["a"])([Object($e["b"])("addTAPreferences")],Vn.prototype,"addTAPreferences",void 0),Vn=Object(Ve["a"])([Object(Ye["a"])({components:{FileDropZone:Nn}})],Vn);var Bn=Vn,Gn=Bn,Yn=(n("e83f"),Object(a["a"])(Gn,Un,Rn,!1,null,"48bd8ce0",null)),$n=Yn.exports,zn=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ne["a"],[t(Ee["a"],[t(Ie["a"],{attrs:{cols:"12"}},[t("h3",[e._v("Define TA workloads")])])],1),t(Ee["a"],e._l(e.taAvailability,(function(n,o){return t(Ie["a"],{key:"av-col-"+o,attrs:{cols:"12",md:"4",xl:"3"}},[t(qe["a"],{attrs:{elevation:"2",tile:""}},[t(Qe["b"],[e._v("Workloads for "+e._s(n.preferences.userId))]),t(Qe["a"],[t(Ne["a"],[t(Ee["a"],[t(Ie["a"],{attrs:{cols:"12"}},[t(tt["a"],{attrs:{type:"number",label:"Total Workload",value:n.totalWorkload},on:{change:t=>e.changeTotal(o,t)}})],1),t(Ie["a"],{attrs:{cols:"12"}},[t(tt["a"],{attrs:{type:"number",label:"Max Weekly Workload",value:n.maxWeeklyWorkload},on:{change:t=>e.changeWeekly(o,t)}})],1)],1)],1)],1)],1)],1)})),1)],1)},Hn=[];let Jn=class extends Ye["e"]{changeTotal(e,t){console.log(e,t),this.setTotal({index:e,value:t})}changeWeekly(e,t){console.log(e,t),this.setWeekly({index:e,value:t})}};Object(Ve["a"])([Object($e["c"])("taAvailability")],Jn.prototype,"taAvailability",void 0),Object(Ve["a"])([Object($e["b"])("setTotalWorkload")],Jn.prototype,"setTotal",void 0),Object(Ve["a"])([Object($e["b"])("setMaxWeeklyWorkload")],Jn.prototype,"setWeekly",void 0),Jn=Object(Ve["a"])([Object(Ye["a"])({components:{}})],Jn);var Zn=Jn,Xn=Zn,Kn=Object(a["a"])(Xn,zn,Hn,!1,null,null,null),qn=Kn.exports,Qn=n("2fa4"),eo=n("71d9"),to=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(eo["a"],{attrs:{outlined:""}},[t(Ce["a"],{on:{click:function(t){return e.performGreedy()}}},[e._v("Greedy")]),t(Ce["a"],{on:{click:function(t){return e.reset()}}},[e._v("Reset")]),t(Qn["a"]),e._v(" Current objective: "+e._s(e.objective)+" ")],1),t("br"),t("div",{staticClass:"table-container"},[t("table",{ref:"table",staticClass:"schedule-table",attrs:{id:"schedulingTable"}},[t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[e._v("Timeslot")]),e._l(e.taAvailability,(function(n,o){return t("th",{key:"table-head-"+o,attrs:{scope:"col"},on:{click:function(t){return e.showDetails(o)}}},[e._v(" "+e._s(e.names[o])+" ")])})),t("th",{attrs:{scope:"col"}},[e._v("Unassigned")])],2)]),t("tbody",e._l(e.slotRows,(function(n,o){return t("tr",{key:"slot-row-"+o},[t("th",{attrs:{scope:"row"}},[e._v(e._s(n))]),e._l(e.taAvailability,(function(s,r){return t("td",{key:"table-cell-"+o+"-"+r,style:{backgroundColor:e.colors[s.preferences.slotPreferences[n]]},attrs:{"data-idxta":r},on:{dragstart:e.dragStart,dragenter:e.dragEnter,dragover:e.dragging,dragleave:e.dragEnd,drop:e.drop}},e._l(e.matrix[o][r],(function(n,s){return t(ft["a"],{key:"table-cell-bundle"+o+"-"+r+"-"+s,attrs:{"x-small":"",draggable:"",color:0==e.bundleViolations[n.index].length?"primary":"secondary","data-idxbundle":n.index},on:{dblclick:function(t){return e.clearBundle(n.index)}}},[e._v(" "+e._s(n.name)+" ")])})),1)})),t("td",{staticStyle:{"background-color":"#dfdfdf"},attrs:{"data-idxta":-1},on:{dragstart:e.dragStart,dragenter:e.dragEnter,dragover:e.dragging,dragleave:e.dragEnd,drop:e.drop}},e._l(e.matrix[o][e.matrix[o].length-1],(function(n,s){return t(ft["a"],{key:"table-cell-unassigned-bundle"+o+"-"+s,attrs:{draggable:"","x-small":"",color:"primary","data-idxbundle":n.index},on:{dblclick:function(t){return e.clearBundle(n.index)}}},[e._v(" "+e._s(n.name)+" ")])})),1)],2)})),0),t("tfoot",[t("tr",[t("th",{attrs:{scope:"row"}},[e._v("Total Workload")]),e._l(e.taAvailability,(function(n,o){return t("th",{key:"table-foot-total-"+o,class:{violation:e.workloads[o]>n.totalWorkload,lowLoad:e.workloads[o]<=.7*n.totalWorkload},attrs:{scope:"col"}},[e._v(" "+e._s(e.workloads[o])+" / "+e._s(n.totalWorkload)+" ")])})),t("th")],2),t("tr",[t("th",{attrs:{scope:"row"}},[e._v("Max Weekly Workload")]),e._l(e.taAvailability,(function(n,o){return t("th",{key:"table-foot-total-"+o,class:{violation:e.weeklyMaxLoads[o]>n.maxWeeklyWorkload},attrs:{scope:"col"}},[e._v(" "+e._s(e.weeklyMaxLoads[o])+" / "+e._s(n.maxWeeklyWorkload)+" ")])})),t("th")],2)])])]),e.violationList.length>0?t(Ke["a"],{attrs:{type:"error"}},[t("h3",[e._v("Violations found!")]),t("ul",e._l(e.violationList,(function(n,o){return t("li",{key:"violation-"+o},[e._v(e._s(n))])})),0)]):e._e(),e._l(e.taAvailability,(function(e,n){return t("tadetails",{key:"ta-details-"+n,ref:"detailDialogs",refInFor:!0,attrs:{availability:e}})})),t(Ce["a"],{on:{click:function(t){return e.print()}}},[e._v("Download SVG")]),t(kn["a"])],2)},no=[],oo=n("169a"),so=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(oo["a"],{attrs:{width:"500"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t(qe["a"],[t(Qe["c"],[e._v(" Details for "+e._s(e.availability.preferences.userId)+" ")]),t(Qe["b"],[t("h4",[e._v("Capabilities")]),t("div",[e._l(Object.entries(e.availability.preferences.capabilities),(function([n,o],s){return[o?t(ft["a"],{key:"cap"+s},[e._v(e._s(n))]):e._e()]}))],2),t("h5",[e._v("Group Type Preferences")]),t("div",e._l(Object.entries(e.availability.preferences.groupTypePreferences),(function([n,o]){return t(ft["a"],{key:"grouptype-"+n,attrs:{color:e.colors[o]}},[e._v(e._s(n))])})),1),t("h5",[e._v("Consecutive Sessions Preferences")]),t("div",e._l(Object.entries(e.availability.preferences.consecutivePreferences),(function([n,o]){return t(ft["a"],{key:"consecutive-"+n,attrs:{color:e.colors[o]}},[e._v(e._s(n)+" consecutive sessions")])})),1),t("h5",[e._v("Different Days Preferences")]),t("div",e._l(Object.entries(e.availability.preferences.differentDaysPreferences),(function([n,o]){return t(ft["a"],{key:"different-days-"+n,attrs:{color:e.colors[o]}},[e._v(e._s(n)+" different days")])})),1),t("h4",[e._v("Scheduling Comment")]),e.availability.preferences.schedulingComment?t("blockquote",[e._v(" "+e._s(e.availability.preferences.schedulingComment)+" ")]):t("p",{staticStyle:{"font-style":"italic"}},[e._v(" No scheduling comment ")])]),t(Qe["a"],[t(Qn["a"]),t(Ce["a"],{attrs:{color:"primary"},on:{click:()=>e.setVisible(!1)}},[e._v("OK")])],1)],1)],1)},ro=[];let ao=class extends Ye["e"]{constructor(){super(...arguments),this.visible=!1,this.colors=M}setVisible(e){this.visible=e}};Object(Ve["a"])([Object(Ye["c"])()],ao.prototype,"availability",void 0),ao=Object(Ve["a"])([Ye["a"]],ao);var co=ao,io=co,lo=(n("d005"),Object(a["a"])(io,so,ro,!1,null,"16bb30ac",null)),uo=lo.exports,fo=n("11a1");function po(e,t){for(const n of t)if(Oe(e,n))return!1;return!0}function ho(e,t,n){const o=se(e,t),s=re(o);return s<=n}function vo(e,t){const n=e.bundles,o=e.availability,s=[],r=e.bundlesPerTa.map(_e),a=ke(n);for(const[c,i]of n.entries()){const n=me(i),l=[];for(const[s,u]of o.entries()){const o=u.preferences,f=V(i.weeklySlot),p=e.bundlesPerTa[s];let d=o.slotPreferences[f]!==W.UNAVAILABLE&&e.workloads[s]+a[c]<=u.totalWorkload&&(null==t||-1==t[c])&&po(i,p)&&ho(r[s],n,u.maxWeeklyWorkload);if(d)e:for(const e of i.sessions)for(const t of e.requiredCapabilities)if(!o.capabilities[t]){d=!1;break e}l.push(d)}s.push(l)}return s}function bo(e,t){const n=new Array(e.length).fill(()=>[]).map(e=>e()),o=new Array(e[0].length).fill(()=>[]).map(e=>e());for(const[a,c]of e.entries())for(const[e,t]of c.entries())t&&(n[a].push(e),o[e].push(a));const s=[];for(const[a,c]of n.entries())c.length>0&&s.push({index:a,bundle:!0,choices:[...c]});for(const[a,c]of o.entries())c.length>0&&s.push({index:a,bundle:!1,choices:[...c]});if(0==s.length)return[];s.sort((e,t)=>e.choices.length-t.choices.length);const r=s[0].choices.length;return s.filter(e=>e.choices.length==r)}function go(e,t=25,n,o=!0){const s={...e};let r=e.currentAssignment,a=!1,c=!1,i=0;const l=o?yo:mo,u=n?fo["a"].seed(n):fo["a"].autoSeed();do{a=!1,i++,s.currentAssignment=r;const t=xe(s),n=vo(t,r),o=l(e,n,r,u);o&&(r=o,a=!0,c=!0)}while(a&&i<=t);return c?r:null}function yo(e,t,n,o){const s=xe(e,n),r=bo(t,s);if(0==r.length)return null;const a=Object(fo["b"])(o,r,1)[0];console.log(a);const c=[];if(a.bundle)for(const f of a.choices){const e=[...n];e[a.index]=f,c.push(e)}else for(const f of a.choices){const e=[...n];e[f]=a.index,c.push(e)}let i=!1,l=s.objective,u=null;for(const f of c){const t=xe(e,f);t.objective>l&&(l=t.objective,u=f,i=!0)}return i?console.log("Improvement found!"):console.log("No improvement found."),u}function mo(e,t,n,o){const s=xe(e,n);let r=!1,a=s.objective,c=null;for(const[i,l]of n.entries())if(-1==l){const s=[...t[i].entries()].filter(e=>e[1]).map(e=>e[0]);Object(fo["c"])(o,s);for(const t of s){const o=[...n];o[i]=t;const s=xe(e,o);s.objective>a&&(a=s.objective,c=o,r=!0)}}return r?console.log("Improvement found!"):console.log("No improvement found."),c}var _o=n("95e3"),Oo=n("d1b2");let ko=class extends Ye["e"]{constructor(){super(...arguments),this.colors=M,this.lastDragBundle=void 0}get slotRows(){return this.instance.askSlots.map(V)}get matrix(){return this.scheduleInformation.matrix}get workloads(){return this.scheduleInformation.workloads}get weeklyMaxLoads(){return this.scheduleInformation.weeklyWorkloads}get bundleViolations(){return this.scheduleInformation.bundleViolations}get violationList(){const e=new Set;return this.bundleViolations.forEach(t=>t.forEach(t=>e.add(t.text))),[...e]}get objective(){return this.scheduleInformation.objective}get names(){const e=new Map,t=new Map;for(const o of this.taAvailability){const n=o.preferences.userId,s=n.trim().split(" "),r=s[0];if(t.has(r)){const o=t.get(r);e.set(o,o),e.set(n,n)}else e.set(n,r),t.set(r,n)}const n=[];for(const o of this.taAvailability)n.push(e.get(o.preferences.userId));return n}showDetails(e){this.detailDialogs[e].setVisible(!0)}async print(){console.log(this.table);const e=Object(_o["a"])(this.table);await Object(Oo["a"])(e.documentElement);const t=(new XMLSerializer).serializeToString(e);z(t,"schedule.svg")}dragStart(e){const t=e.target;this.lastDragBundle=ee(t,"idxbundle","table")}dragEnter(e){e.preventDefault()}dragging(e){e.preventDefault()}dragEnd(e){e.preventDefault()}dragging2(e,t){e.preventDefault();const n=e.target,o=n.dataset;t&&o&&"bundleId"in o&&(this.lastDragBundle=o["bundleId"])}performGreedy(){const e=go(this.fullState);null!=e&&this.setAssignment(e)}reset(){const e=new Array(this.currentAssignment.length).fill(-1);this.setAssignment(e)}drop(e){e.preventDefault();const t=e.target,n=ee(t,"idxta","table");void 0!==this.lastDragBundle&&void 0!==n&&this.assignBundleToTa({bundleIndex:this.lastDragBundle,taIndex:n})}clearBundle(e){this.assignBundleToTa({bundleIndex:e,taIndex:-1})}};Object(Ve["a"])([Object($e["c"])("instance")],ko.prototype,"instance",void 0),Object(Ve["a"])([Object($e["c"])("taAvailability")],ko.prototype,"taAvailability",void 0),Object(Ve["a"])([Object($e["c"])("currentAssignment")],ko.prototype,"currentAssignment",void 0),Object(Ve["a"])([Object(Ye["d"])("detailDialogs")],ko.prototype,"detailDialogs",void 0),Object(Ve["a"])([Object($e["a"])("scheduleInformation")],ko.prototype,"scheduleInformation",void 0),Object(Ve["a"])([Object(Ye["d"])("table")],ko.prototype,"table",void 0),Object(Ve["a"])([Object($e["a"])("fullState")],ko.prototype,"fullState",void 0),Object(Ve["a"])([Object($e["b"])("setAssignment")],ko.prototype,"setAssignment",void 0),Object(Ve["a"])([Object($e["b"])("assignBundleToTa")],ko.prototype,"assignBundleToTa",void 0),ko=Object(Ve["a"])([Object(Ye["a"])({components:{tadetails:uo}})],ko);var So=ko,xo=So,jo=(n("6cf5"),Object(a["a"])(xo,to,no,!1,null,"769dcae9",null)),wo=jo.exports,Ao=n("4bd4"),To=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ne["a"],[t(Ee["a"],[t(Ie["a"],{attrs:{cols:"12"}},[t("h3",[e._v("Define Scheduling Priorities")])])],1),t(Ee["a"],[t(Ie["a"],{attrs:{cols:"12",lg:"6"}},[t(Ao["a"],[t("h5",[e._v("Score per preference")]),t(tt["a"],{attrs:{type:"number",value:e.config.stronglyFavoredScore,label:"Strongly Unfavored"},on:{change:t=>e.updateConfig("stronglyFavoredScore",t)}}),t(tt["a"],{attrs:{type:"number",value:e.config.favoredScore,label:"Unfavored"},on:{change:t=>e.updateConfig("favoredScore",t)}}),t(tt["a"],{attrs:{type:"number",value:e.config.neutralScore,label:"Neutral"},on:{change:t=>e.updateConfig("neutralScore",t)}}),t(tt["a"],{attrs:{type:"number",value:e.config.unfavoredScore,label:"Favored"},on:{change:t=>e.updateConfig("unfavoredScore",t)}}),t(tt["a"],{attrs:{type:"number",value:e.config.stronglyUnfavoredScore,label:"Strongly Favored"},on:{change:t=>e.updateConfig("stronglyUnfavoredScore",t)}}),t(tt["a"],{attrs:{type:"number",value:e.config.unavailableScore,label:"Unavailable"},on:{change:t=>e.updateConfig("unavailableScore",t)}}),t(kn["a"]),t("br"),t("h5",[e._v("Student Preference Weights")]),t(tt["a"],{attrs:{type:"number",value:e.config.slotPreferenceFactor,label:"Timeslot Preference Factor"},on:{change:t=>e.updateConfig("slotPreferenceFactor",t)}}),t(tt["a"],{attrs:{type:"number",value:e.config.groupPreferenceFactor,label:"Group Preference Factor"},on:{change:t=>e.updateConfig("groupPreferenceFactor",t)}}),t(tt["a"],{attrs:{type:"number",value:e.config.consecutiveSessionFactor,label:"Consecutive Sessions Factor"},on:{change:t=>e.updateConfig("consecutiveSessionFactor",t)}}),t(tt["a"],{attrs:{type:"number",value:e.config.multipleDayFactor,label:"Multiple Days Factor"},on:{change:t=>e.updateConfig("multipleDayFactor",t)}}),t(kn["a"]),t("br"),t("h5",[e._v("Course Objectives")]),t(tt["a"],{attrs:{type:"number",value:e.config.multiTAExponent,label:"Multiple TAs per Group Exponent"},on:{change:t=>e.updateConfig("multiTAExponent",t)}}),t(tt["a"],{attrs:{type:"number",value:e.config.multiTAFactor,label:"Multiple TAs per Group Factor"},on:{change:t=>e.updateConfig("multiTAFactor",t)}}),t(tt["a"],{attrs:{type:"number",value:e.config.violationScore,label:"Violation Score"},on:{change:t=>e.updateConfig("violationScore",t)}}),t(tt["a"],{attrs:{type:"number",value:e.config.uncoveredScore,label:"Uncovered Session Score"},on:{change:t=>e.updateConfig("uncoveredScore",t)}})],1)],1)],1)],1)},Po=[];let Do=class extends Ye["e"]{updateConfig(e,t){const n={...this.config};n[e]=t,this.setConfig(n)}};Object(Ve["a"])([Object($e["c"])("configuration")],Do.prototype,"config",void 0),Object(Ve["a"])([Object($e["b"])("setConfiguration")],Do.prototype,"setConfig",void 0),Do=Object(Ve["a"])([Object(Ye["a"])({components:{}})],Do);var Co=Do,Io=Co,No=Object(a["a"])(Io,To,Po,!1,null,null,null),Lo=No.exports,Eo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ne["a"],[t(Ee["a"],[t(Ie["a"],[t("h3",[e._v("Wrap-Up")]),t(Ce["a"],{staticClass:"spaced",attrs:{color:"primary"},on:{click:e.download}},[e._v("Download State as JSON")]),t("br"),t(Ce["a"],{staticClass:"spaced",attrs:{color:"primary"},on:{click:e.downloadTAXLSX}},[e._v("Download Teacher Spreadsheet")]),t("br"),t(Ce["a"],{staticClass:"spaced",attrs:{color:"primary"},on:{click:e.downloadGroupXLSX}},[e._v("Download Group Spreadsheet")])],1)],1)],1)},Fo=[];function Wo(e){const t=p.a.utils.book_new();t.Props={Title:"Schedule for "+e.instance.courseNames.join(", ")};const n=Se(e.instance,e.taAvailability,e.currentAssignment,e.configuration),o=Uo(n,!0),s=Uo(n),r=[...o.keys()].sort();Go(t,[{header:"Group Types per TA",keys:r,map:o},{header:"Groups per TA",keys:r,map:s}]);for(const[a,c]of e.taAvailability.entries()){const e=n.bundlesPerTa[a],o=[];for(const t of e)for(const e of t.sessions)o.push(e);o.sort(oe);const s=[["Start","End","Group","Location"]];for(const t of o){const e=new Date(t.timeSlot.start),n=new Date(t.timeSlot.end);s.push([e.toLocaleString(),n.toLocaleString(),t.group.name,t.location])}Bo(t,s,`${a+1}. ${c.preferences.userId}`,[28,28,10,35])}return t}function Mo(e){const t=new Map;for(const o of e.assignedSessions){const e=o.group.name;var n;if(t.has(e))null===(n=t.get(e))||void 0===n||n.push(o);else t.set(e,[o])}for(const o of t.values())o.sort(oe);return t}function Uo(e,t=!1){const n=new Map;for(const o of e.assignedSessions){const e=o.userId,s=t?o.group.groupType:o.group.name;let r=n.get(e);r||(r=new Map,n.set(e,r));const a=r.get(s)||0;r.set(s,a+1)}return n}function Ro(e,t=!1){const n=new Map;for(const o of e.assignedSessions){const e=t?o.group.groupType:o.group.name;let s=n.get(e);s||(s=new Map,n.set(e,s));const r=s.get(o.userId)||0;s.set(o.userId,r+1)}return n}function Vo(e,t,n){for(const o of e){t.push([o]);const e=n.get(o);if(!e)continue;const s=[...e.entries()];s.sort((e,t)=>t[1]-e[1]);for(const[n,o]of s)t.push([n,o+" sessions"]);t.push([])}}function Bo(e,t,n,o){e.SheetNames.push(n);const s=p.a.utils.aoa_to_sheet(t),r=[];for(const a of o)r.push({wch:a});s["!cols"]=r,e.Sheets[n]=s}function Go(e,t){const n=[];for(const o of t)n.push([o.header]),n.push([]),Vo(o.keys,n,o.map),n.push([]);Bo(e,n,"Overview",[25,12])}function Yo(e){const t=p.a.utils.book_new();t.Props={Title:"Schedule for "+e.instance.courseNames.join(", ")};const n=Se(e.instance,e.taAvailability,e.currentAssignment,e.configuration),o=Mo(n),s=Ro(n,!0),r=Ro(n),a=[...o.keys()].sort(),c=[...s.keys()].sort();Go(t,[{header:"Overview per Group Type",keys:c,map:s},{header:"Overview per Group",keys:a,map:r}]);for(const[i,l]of a.entries()){const e=[["Start","End","Location","Teacher"]],n=o.get(l);if(n)for(const t of n){const n=new Date(t.timeSlot.start),o=new Date(t.timeSlot.end);e.push([n.toLocaleString(),o.toLocaleString(),t.location,t.userId])}Bo(t,e,`${i+1}. ${l}`,[28,28,35,28])}return t}function $o(e){const t=Wo(e),n="Schedule for "+e.instance.courseNames[0].replaceAll(/[^A-Za-z0-9-_]/g,"_")+".xlsx";p.a.writeFile(t,n)}function zo(e){const t=Yo(e),n="Schedule for "+e.instance.courseNames[0].replaceAll(/[^A-Za-z0-9-_]/g,"_")+".xlsx";p.a.writeFile(t,n)}let Ho=class extends Ye["e"]{download(){$(this.fullState)}downloadTAXLSX(){$o(this.fullState)}downloadGroupXLSX(){zo(this.fullState)}};Object(Ve["a"])([Object($e["a"])("fullState")],Ho.prototype,"fullState",void 0),Ho=Object(Ve["a"])([Ye["a"]],Ho);var Jo=Ho,Zo=Jo,Xo=(n("1036"),Object(a["a"])(Zo,Eo,Fo,!1,null,"48dd6482",null)),Ko=Xo.exports;let qo=class extends Ye["e"]{constructor(){super(...arguments),this.step=1}next(){this.step++}prev(){this.step--}};Object(Ve["a"])([Object($e["c"])("instance")],qo.prototype,"instance",void 0),qo=Object(Ve["a"])([Object(Ye["a"])({components:{Welcome:Mn,loadtapreferences:$n,SchedulingTable:wo,employment:qn,SchedulingConfigurationPage:Lo,WrapUp:Ko}})],qo);var Qo=qo,es=Qo,ts=Object(a["a"])(es,_n,On,!1,null,null,null),ns=ts.exports,os=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(De["a"],[t(Le["a"],[t(Ne["a"],{staticClass:"text-left"},[t(Ee["a"],[t(Ie["a"],[t(Fe["a"],{attrs:{"non-linear":"",vertical:""},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[t(Me["a"],{attrs:{editable:"",step:"1"}},[e._v("Introduction")]),t(We["a"],{attrs:{step:"1"}},[t("welcome"),t(Ce["a"],{attrs:{color:"primary"},on:{click:e.next}},[e._v("Next")]),e._v("   ")],1),t(Me["a"],{attrs:{editable:"",step:"2"}},[e._v("Wrap Up")]),t(We["a"],{attrs:{step:"2"}},[t("wrap-up"),t(Ce["a"],{attrs:{color:"secondary"},on:{click:e.prev}},[e._v("Back")])],1)],1)],1)],1)],1)],1)],1)},ss=[],rs=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ne["a"],[t(Ee["a"],[t(Ie["a"],[t("h3",[e._v("Welcome")]),t("p",[e._v("In this part of the application you can convert scheduling data from a spreadsheet into an instance to use in this scheduling application.")]),t("h3",[e._v("Load Timetable Spreadsheet")]),t("FileDropZone",{attrs:{accept:".xlsx",allowMultiple:!1},on:{change:e.change}})],1)],1)],1)},as=[];let cs=class extends Ye["e"]{change(e){if(e)for(const t of e){const e=new FileReader;e.addEventListener("load",this.processFile),e.readAsArrayBuffer(t),e.readAsText(t)}}processFile(e){var t;const n=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.result;if(n)try{const e=new Uint8Array(n);console.log(e);const t=Object(f["read"])(e,{type:"array",cellDates:!0}),o=y(t);console.log(o),this.setInstance(o)}catch(o){console.log(o)}}};Object(Ve["a"])([Object($e["b"])("setInstance")],cs.prototype,"setInstance",void 0),cs=Object(Ve["a"])([Object(Ye["a"])({components:{FileDropZone:Nn}})],cs);var is=cs,ls=is,us=(n("c009"),Object(a["a"])(ls,rs,as,!1,null,"5dbdf480",null)),fs=us.exports,ps=n("2db4"),ds=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Ne["a"],[t(Ee["a"],[t(Ie["a"],[t("h3",[e._v("Wrap-Up")]),t(Ce["a"],{staticClass:"spaced",attrs:{color:"primary"},on:{click:e.download}},[e._v("Download Scheduling Instance as JSON")]),t("br"),t(Ce["a"],{staticClass:"spaced",attrs:{color:"primary"},on:{click:e.copyText}},[e._v("Copy invitation text to invite TA's to fill in a scheduling survey")]),t("br"),t(Ce["a"],{staticClass:"spaced",attrs:{color:"primary"},on:{click:e.copyLink}},[e._v("Copy link to Preference Survey")])],1)],1),t(ps["a"],{attrs:{centered:"",timeout:3e3},scopedSlots:e._u([{key:"action",fn:function({attrs:n}){return[t(Ce["a"],e._b({attrs:{color:"primary",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",n,!1),[e._v(" Close ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarText)+" ")])],1)},hs=[],vs=n("e762"),bs=n("f904"),gs=n.n(bs);let ys=class extends Ye["e"]{constructor(){super(...arguments),this.snackbar=!1,this.snackbarText=""}get instanceHash(){const e=JSON.stringify(this.instance);return vs["a"].encode(e)}get instanceLink(){const e=window.location.origin,t=window.location.pathname.split("/");t.pop();const n=t.join("/");return e+n+"/#"+this.instanceHash}download(){G(this.instance)}copyLink(){gs()(this.instanceLink),this.snackbar=!0,this.snackbarText="Link copied to the clipboard. You can share this link with your teaching assistants."}copyText(){const e=`<p>Dear teaching assistant,</p>\n      <p>we are currently collecting your scheduling preferences for the course(s) ${this.instance.courseNames.join(", ")}.\n      Please follow <a href="${this.instanceLink}" target="_blank">this link</a> and provide your preferences.</p>\n      <p>Once your have finished filling in your preferences in this tool, you will receive a JSON file containing your preferences.\n        Please respond to this email with this JSON file as an attachment.</p>\n        <p>Kind regards,</p>\n        <p>The teacher</p>`;gs()(e,{format:"text/html"}),this.snackbar=!0,this.snackbarText="Text copied to the clipboard. You can paste this text into an e-mail to your teaching assistants."}};Object(Ve["a"])([Object($e["c"])("instance")],ys.prototype,"instance",void 0),ys=Object(Ve["a"])([Ye["a"]],ys);var ms=ys,_s=ms,Os=(n("3d9a"),Object(a["a"])(_s,ds,hs,!1,null,"6ea85474",null)),ks=Os.exports;let Ss=class extends Ye["e"]{constructor(){super(...arguments),this.step=1}isActive(e){if(this.instance){if(0==this.instance.askSlots.length&&3==e)return!1;if(!this.instance.askGroupTypes&&4==e)return!1;if(!this.instance.askConsecutiveSessions&&5==e)return!1;if(!this.instance.askDifferentDays&&6==e)return!1}return!0}next(){this.step++;while(!this.isActive(this.step))this.step++}prev(){this.step--;while(!this.isActive(this.step))this.step--}};Object(Ve["a"])([Object($e["c"])("instance")],Ss.prototype,"instance",void 0),Ss=Object(Ve["a"])([Object(Ye["a"])({components:{Welcome:fs,WrapUp:ks}})],Ss);var xs=Ss,js=xs,ws=Object(a["a"])(js,os,ss,!1,null,null,null),As=ws.exports;o["a"].use(Pe["a"]);const Ts=[{path:"/",name:"Home",component:mn},{path:"/scheduling",name:"Scheduling",component:ns},{path:"/prepare",name:"Prepare",component:As}],Ps=new Pe["a"]({mode:"history",base:"/TA-scheduling/",routes:Ts});var Ds=Ps;function Cs(){const e=window.location.hash.substring(1);if(e.length>0)try{const t=vs["a"].decode(e);we.dispatch("loadInstance",{data:t})}catch(t){console.log(t)}else we.dispatch("loadInstance",{url:"instance.json"})}o["a"].config.productionTip=!1,new o["a"]({store:we,vuetify:Te,router:Ds,render:e=>e(l)}).$mount("#app"),window.addEventListener("hashchange",Cs),Cs()},d005:function(e,t,n){"use strict";n("a022")},df0d:function(e,t,n){},e37e:function(e,t,n){"use strict";n("1a06")},e83f:function(e,t,n){"use strict";n("30e7")},ea77:function(e,t,n){},f110:function(e,t,n){"use strict";n("007d")},fe81:function(e,t,n){"use strict";n("1c40")}});
//# sourceMappingURL=app.6f2e2b4c.js.map